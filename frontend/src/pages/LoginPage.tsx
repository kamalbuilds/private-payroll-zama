import React, { useEffect } from 'react';\nimport {\n  Container,\n  Paper,\n  Typography,\n  Box,\n  Grid,\n  Card,\n  CardContent,\n  CardActions,\n  Button,\n  Chip,\n  Alert,\n} from '@mui/material';\nimport {\n  Person as PersonIcon,\n  Business as BusinessIcon,\n  AdminPanelSettings as AdminIcon,\n  Assessment as AuditIcon,\n  Lock as LockIcon,\n} from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { useWalletContext } from '../contexts/WalletContext';\nimport { useAuthContext } from '../contexts/AuthContext';\nimport { WalletConnect } from '../components/WalletConnect';\nimport { UserRole } from '../types';\n\nexport const LoginPage: React.FC = () => {\n  const navigate = useNavigate();\n  const { walletState, isChainSupported } = useWalletContext();\n  const { user, getDefaultRoute } = useAuthContext();\n\n  useEffect(() => {\n    // Redirect to dashboard if user is already authenticated\n    if (walletState.isConnected && user && isChainSupported) {\n      navigate(getDefaultRoute());\n    }\n  }, [walletState.isConnected, user, isChainSupported, navigate, getDefaultRoute]);\n\n  const roleCards = [\n    {\n      role: UserRole.EMPLOYEE,\n      title: 'Employee Portal',\n      description: 'View your encrypted salary, payment history, and tax information with complete privacy.',\n      icon: <PersonIcon sx={{ fontSize: 40 }} />,\n      features: [\n        'View encrypted salary',\n        'Payment history',\n        'Tax summaries',\n        'Personal dashboard',\n      ],\n      color: 'primary',\n    },\n    {\n      role: UserRole.EMPLOYER,\n      title: 'Employer Dashboard',\n      description: 'Manage employees and distribute bonuses while maintaining confidentiality.',\n      icon: <BusinessIcon sx={{ fontSize: 40 }} />,\n      features: [\n        'Add/remove employees',\n        'Distribute bonuses',\n        'Company overview',\n        'Employee management',\n      ],\n      color: 'secondary',\n    },\n    {\n      role: UserRole.ADMIN,\n      title: 'Administrator Panel',\n      description: 'Process payroll and manage system settings with encrypted operations.',\n      icon: <AdminIcon sx={{ fontSize: 40 }} />,\n      features: [\n        'Process payroll',\n        'System settings',\n        'User management',\n        'Security controls',\n      ],\n      color: 'error',\n    },\n    {\n      role: UserRole.AUDITOR,\n      title: 'Auditor Interface',\n      description: 'Generate compliance reports and analyze aggregated data without exposing individual information.',\n      icon: <AuditIcon sx={{ fontSize: 40 }} />,\n      features: [\n        'Compliance reports',\n        'Audit trails',\n        'Aggregated analytics',\n        'Regulatory tools',\n      ],\n      color: 'info',\n    },\n  ] as const;\n\n  return (\n    <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n      {/* Header */}\n      <Paper \n        sx={{ \n          p: 4, \n          mb: 4, \n          textAlign: 'center',\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n          color: 'white',\n        }}\n      >\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" gap={2} mb={2}>\n          <LockIcon sx={{ fontSize: 48 }} />\n          <Typography variant=\"h3\" fontWeight=\"bold\">\n            Confidential Payroll System\n          </Typography>\n        </Box>\n        <Typography variant=\"h6\" sx={{ opacity: 0.9 }}>\n          Privacy-preserving payroll management with fully homomorphic encryption\n        </Typography>\n      </Paper>\n\n      {/* Wallet Connection */}\n      <Box mb={4}>\n        {!walletState.isConnected ? (\n          <Paper sx={{ p: 3, textAlign: 'center' }}>\n            <Typography variant=\"h6\" gutterBottom>\n              Connect Your Wallet to Continue\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\" mb={3}>\n              Please connect your MetaMask wallet to access the payroll system.\n            </Typography>\n            <WalletConnect showCard={false} />\n          </Paper>\n        ) : !isChainSupported ? (\n          <Alert severity=\"warning\">\n            Please switch to a supported network to continue.\n          </Alert>\n        ) : (\n          <Alert severity=\"success\">\n            Wallet connected successfully! Your role will be automatically detected.\n          </Alert>\n        )}\n      </Box>\n\n      {/* Role Information */}\n      <Typography variant=\"h4\" gutterBottom align=\"center\" mb={4}>\n        System Roles & Features\n      </Typography>\n      \n      <Grid container spacing={3}>\n        {roleCards.map((roleCard) => (\n          <Grid item xs={12} md={6} key={roleCard.role}>\n            <Card \n              sx={{ \n                height: '100%',\n                display: 'flex',\n                flexDirection: 'column',\n                transition: 'transform 0.2s ease-in-out',\n                '&:hover': {\n                  transform: 'translateY(-4px)',\n                  boxShadow: (theme) => theme.shadows[8],\n                },\n              }}\n            >\n              <CardContent sx={{ flexGrow: 1 }}>\n                <Box display=\"flex\" alignItems=\"center\" gap={2} mb={2}>\n                  <Box \n                    sx={{ \n                      p: 1, \n                      borderRadius: 2, \n                      backgroundColor: `${roleCard.color}.light`,\n                      color: `${roleCard.color}.contrastText`,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                    }}\n                  >\n                    {roleCard.icon}\n                  </Box>\n                  <Box>\n                    <Typography variant=\"h6\" fontWeight=\"bold\">\n                      {roleCard.title}\n                    </Typography>\n                    <Chip \n                      label={roleCard.role.charAt(0).toUpperCase() + roleCard.role.slice(1)}\n                      size=\"small\"\n                      color={roleCard.color}\n                      variant=\"outlined\"\n                    />\n                  </Box>\n                </Box>\n                \n                <Typography variant=\"body1\" color=\"text.secondary\" mb={2}>\n                  {roleCard.description}\n                </Typography>\n                \n                <Typography variant=\"subtitle2\" gutterBottom>\n                  Key Features:\n                </Typography>\n                <Box component=\"ul\" sx={{ pl: 2, m: 0 }}>\n                  {roleCard.features.map((feature, index) => (\n                    <Typography \n                      key={index}\n                      component=\"li\" \n                      variant=\"body2\" \n                      color=\"text.secondary\"\n                      sx={{ mb: 0.5 }}\n                    >\n                      {feature}\n                    </Typography>\n                  ))}\n                </Box>\n              </CardContent>\n              \n              <CardActions sx={{ p: 2, pt: 0 }}>\n                <Button \n                  variant=\"outlined\" \n                  fullWidth\n                  color={roleCard.color}\n                  disabled={!walletState.isConnected || !isChainSupported}\n                  startIcon={<LockIcon />}\n                >\n                  {walletState.isConnected && isChainSupported \n                    ? 'Access Granted'\n                    : 'Connect Wallet to Access'\n                  }\n                </Button>\n              </CardActions>\n            </Card>\n          </Grid>\n        ))}\n      </Grid>\n\n      {/* Security Features */}\n      <Paper sx={{ p: 3, mt: 4 }}>\n        <Typography variant=\"h5\" gutterBottom align=\"center\">\n          Privacy & Security Features\n        </Typography>\n        <Grid container spacing={2} sx={{ mt: 1 }}>\n          <Grid item xs={12} sm={6} md={3}>\n            <Box textAlign=\"center\">\n              <LockIcon color=\"primary\" sx={{ fontSize: 32, mb: 1 }} />\n              <Typography variant=\"subtitle2\">End-to-End Encryption</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                All salary data encrypted with FHE\n              </Typography>\n            </Box>\n          </Grid>\n          <Grid item xs={12} sm={6} md={3}>\n            <Box textAlign=\"center\">\n              <AdminIcon color=\"primary\" sx={{ fontSize: 32, mb: 1 }} />\n              <Typography variant=\"subtitle2\">Role-Based Access</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Granular permissions for each user type\n              </Typography>\n            </Box>\n          </Grid>\n          <Grid item xs={12} sm={6} md={3}>\n            <Box textAlign=\"center\">\n              <BusinessIcon color=\"primary\" sx={{ fontSize: 32, mb: 1 }} />\n              <Typography variant=\"subtitle2\">Zero-Knowledge Compliance</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Generate reports without exposing data\n              </Typography>\n            </Box>\n          </Grid>\n          <Grid item xs={12} sm={6} md={3}>\n            <Box textAlign=\"center\">\n              <AuditIcon color=\"primary\" sx={{ fontSize: 32, mb: 1 }} />\n              <Typography variant=\"subtitle2\">Audit Trail</Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Complete transaction history\n              </Typography>\n            </Box>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Container>\n  );\n};"